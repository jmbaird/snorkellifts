/* Source and licensing information for the line(s) below can be found at http://www.snorkellifts.com/core/misc/tabbingmanager.js. */
;function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()};function _nonIterableSpread(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')};function _unsupportedIterableToArray(t,e){if(!t)return;if(typeof t==='string')return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==='Object'&&t.constructor)a=t.constructor.name;if(a==='Map'||a==='Set')return Array.from(t);if(a==='Arguments'||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(t,e)};function _iterableToArray(t){if(typeof Symbol!=='undefined'&&t[Symbol.iterator]!=null||t['@@iterator']!=null)return Array.from(t)};function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)};function _arrayLikeToArray(t,e){if(e==null||e>t.length)e=t.length;for(var a=0,r=new Array(e);a<e;a++){r[a]=t[a]};return r}(function(t,e,a){var r=a.tabbable,o=a.isTabbable;function n(){this.stack=[]};function i(e){t.extend(this,{level:null,$tabbableElements:t(),$disabledElements:t(),released:!1,active:!1,trapFocus:!1},e)};t.extend(n.prototype,{constrain:function(e){var c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},l=c.trapFocus,b=l===void 0?!1:l;var u=this.stack.length;for(var s=0;s<u;s++){this.stack[s].deactivate()};var a=[];t(e).each(function(t,e){a=[].concat(_toConsumableArray(a),_toConsumableArray(r(e)));if(o(e)){a=[].concat(_toConsumableArray(a),[e])}});var n=new i({level:this.stack.length,$tabbableElements:t(a),trapFocus:b});this.stack.push(n);n.activate();t(document).trigger('drupalTabbingConstrained',n);return n},release:function(){var t=this.stack.length-1;while(t>=0&&this.stack[t].released){t--};this.stack.splice(t+1);if(t>=0){this.stack[t].activate()}},activate:function(e){var a=e.$tabbableElements,l=e.level,n=t(r(document.body)).not(a);e.$disabledElements=n;var s=n.length;for(var o=0;o<s;o++){this.recordTabindex(n.eq(o),l)};n.prop('tabindex',-1).prop('autofocus',!1);var i=a.filter('[autofocus]').eq(-1);if(i.length===0){i=a.eq(0)};i.trigger('focus');if(a.length&&e.trapFocus){a.last().on('keydown.focus-trap',function(t){if(t.key==='Tab'&&!t.shiftKey){t.preventDefault();a.first().focus()}});a.first().on('keydown.focus-trap',function(t){if(t.key==='Tab'&&t.shiftKey){t.preventDefault();a.last().focus()}})}},deactivate:function(t){var a=t.$disabledElements,r=t.level,n=a.length;t.$tabbableElements.first().off('keydown.focus-trap');t.$tabbableElements.last().off('keydown.focus-trap');for(var e=0;e<n;e++){this.restoreTabindex(a.eq(e),r)}},recordTabindex:function(t,e){var a=t.data('drupalOriginalTabIndices')||{};a[e]={tabindex:t[0].getAttribute('tabindex'),autofocus:t[0].hasAttribute('autofocus')};t.data('drupalOriginalTabIndices',a)},restoreTabindex:function(t,e){var a=t.data('drupalOriginalTabIndices');if(a&&a[e]){var n=a[e];if(n.tabindex){t[0].setAttribute('tabindex',n.tabindex)}
else{t[0].removeAttribute('tabindex')};if(n.autofocus){t[0].setAttribute('autofocus','autofocus')};if(e===0){t.removeData('drupalOriginalTabIndices')}
else{var r=e;while(a.hasOwnProperty(r)){delete a[r];r++};t.data('drupalOriginalTabIndices',a)}}}});t.extend(i.prototype,{release:function(){if(!this.released){this.deactivate();this.released=!0;e.tabbingManager.release(this);t(document).trigger('drupalTabbingContextReleased',this)}},activate:function(){if(!this.active&&!this.released){this.active=!0;e.tabbingManager.activate(this);t(document).trigger('drupalTabbingContextActivated',this)}},deactivate:function(){if(this.active){this.active=!1;e.tabbingManager.deactivate(this);t(document).trigger('drupalTabbingContextDeactivated',this)}}});if(e.tabbingManager){return};e.tabbingManager=new n()})(jQuery,Drupal,window.tabbable);
/* Source and licensing information for the above line(s) can be found at http://www.snorkellifts.com/core/misc/tabbingmanager.js. */