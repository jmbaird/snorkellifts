/* Source and licensing information for the line(s) below can be found at http://www.snorkellifts.com/core/modules/contextual/js/contextual.js. */
(function(e,t,a,i,u,d,n){var r=e.extend(a.contextual,{strings:{open:t.t('Open'),close:t.t('Close')}});var s=n.getItem('Drupal.contextual.permissionsHash'),o=a.user.permissionsHash;if(s!==o){if(typeof o==='string'){i.chain(n).keys().each(function(e){if(e.substring(0,18)==='Drupal.contextual.'){n.removeItem(e)}})};n.setItem('Drupal.contextual.permissionsHash',o)};function c(e){var n=e.parents('.contextual-region').eq(-1).find('.contextual');if(n.length<=1){return};var i=n.eq(0).offset().top,r=n.eq(1).offset().top;if(i===r){var t=n.eq(1),a=0,o=t.find('.trigger');o.removeClass('visually-hidden');a=t.height();o.addClass('visually-hidden');t.css({top:t.position().top+a})}};function l(n,i){var s=n.closest('.contextual-region'),o=t.contextual;n.html(i).addClass('contextual').prepend(t.theme('contextualTrigger'));var p='destination='.concat(t.encodePath(t.url(a.path.currentPath+window.location.search)));n.find('.contextual-links a').each(function(){var e=this.getAttribute('href'),t=e.indexOf('?')===-1?'?':'&';this.setAttribute('href',e+t+p)});var d='',h=s.find('h2');if(h.length){d=h[0].textContent.trim()};var l=new o.StateModel({title:d});var u=e.extend({el:n,model:l},r);o.views.push({visual:new o.VisualView(u),aural:new o.AuralView(u),keyboard:new o.KeyboardView(u)});o.regionViews.push(new o.RegionView(e.extend({el:s,model:l},r)));o.collection.add(l);e(document).trigger('drupalContextualLinkAdded',t.deprecatedProperty({target:{$el:n,$region:s,model:l},deprecatedProperty:'model',message:'The model property is deprecated in drupal:9.4.0 and is removed from drupal:10.0.0. There is no replacement.'}));c(n)};t.behaviors.contextual={attach:function(a){var c=e(a),o=e(once('contextual-render','[data-contextual-id]',a));if(o.length===0){return};var s=[];o.each(function(){s.push({id:e(this).attr('data-contextual-id'),token:e(this).attr('data-contextual-token')})});var r=[],u=[];s.forEach(function(e){var t=n.getItem('Drupal.contextual.'.concat(e.id));if(t&&t.length){window.setTimeout(function(){l(c.find('[data-contextual-id="'.concat(e.id,'"]:empty')).eq(0),t)});return};r.push(e.id);u.push(e.token)});if(r.length>0){e.ajax({url:t.url('contextual/render'),type:'POST',data:{'ids[]':r,'tokens[]':u},dataType:'json',success:function(e){i.each(e,function(e,t){n.setItem('Drupal.contextual.'.concat(t),e);if(e.length>0){o=c.find('[data-contextual-id="'.concat(t,'"]'));for(var a=0;a<o.length;a++){l(o.eq(a),e)}}})}})}}};t.contextual={views:[],regionViews:[]};t.contextual.collection=new u.Collection([],{model:t.contextual.StateModel});t.theme.contextualTrigger=function(){return'<button class="trigger visually-hidden focusable" type="button"></button>'};e(document).on('drupalContextualLinkAdded',function(e,n){t.ajax.bindAjaxLinks(n.$el[0])})})(jQuery,Drupal,drupalSettings,_,Backbone,window.JSON,window.sessionStorage);
/* Source and licensing information for the above line(s) can be found at http://www.snorkellifts.com/core/modules/contextual/js/contextual.js. */