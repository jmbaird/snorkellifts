/* Source and licensing information for the line(s) below can be found at http://www.snorkellifts.com/core/modules/tour/js/tour.js. */
(function(t,o,e,r,n,s){var i=decodeURI(window.location.search);e.behaviors.tour={attach:function(o){once('tour','body').forEach(function(){var s=new e.tour.models.StateModel();new e.tour.views.ToggleTourView({el:t(o).find('#toolbar-tab-tour'),model:s});s.on('change:isActive',function(e,o){t(n).trigger(o?'drupalTourStarted':'drupalTourStopped')});if(r._tour_internal){s.set('tour',r._tour_internal)};if(/tour=?/i.test(i)){s.set('isActive',!0)}})}};e.tour=e.tour||{models:{},views:{}};e.tour.models.StateModel=o.Model.extend({defaults:{tour:[],isActive:!1,activeTour:[]}});e.tour.views.ToggleTourView=o.View.extend({events:{click:'onClick'},initialize:function(){this.listenTo(this.model,'change:tour change:isActive',this.render);this.listenTo(this.model,'change:isActive',this.toggleTour)},render:function(){this.$el.toggleClass('hidden',this._getTour().length===0);var t=this.model.get('isActive');this.$el.find('button').toggleClass('is-active',t).attr('aria-pressed',t);return this},toggleTour:function(){if(this.model.get('isActive')){this._removeIrrelevantTourItems(this._getTour());var o=this.model.get('tour'),n=this;if(o.length){r.tourShepherdConfig.defaultStepOptions.popperOptions.modifiers.push({name:'moveArrowJoyridePosition',enabled:!0,phase:'write',fn:function(t){var e=t.state,r=e.elements.arrow,o=e.placement;if(r&&/^top|bottom/.test(o)&&/-start|-end$/.test(o)){var n=o.split('-')[1],i=n==='start'?28:e.elements.popper.clientWidth-56;r.style.transform='translate3d('.concat(i,'px, 0px, 0px)')}}});var t=new s.Tour(r.tourShepherdConfig);t.on('cancel',function(){n.model.set('isActive',!1)});t.on('complete',function(){n.model.set('isActive',!1)});o.forEach(function(o,r){var n={title:o.title?e.checkPlain(o.title):null,text:function(){return e.theme('tourItemContent',o)},attachTo:o.attachTo,buttons:[e.tour.nextButton(t,o)],classes:o.classes,index:r};n.when={show:function(){var o=t.currentStep.el.querySelector('footer button');o.focus();if(e.tour.hasOwnProperty('convertToJoyrideMarkup')){e.tour.convertToJoyrideMarkup(t)}}};t.addStep(n)});t.start();this.model.set({isActive:!0,activeTour:t})}}
else{this.model.get('activeTour').cancel();this.model.set({isActive:!1,activeTour:[]})}},onClick:function(t){this.model.set('isActive',!this.model.get('isActive'));t.preventDefault();t.stopPropagation()},_getTour:function(){return this.model.get('tour')},_removeIrrelevantTourItems:function(t){var r=/tips=([^&]+)/.exec(i),o=t.filter(function(t){if(r&&t.hasOwnProperty('classes')&&t.classes.indexOf(r[1])===-1){return!1};return!(t.selector&&!n.querySelector(t.selector))});if(t.length!==o.length){o.forEach(function(t,r){o[r].counter=e.t('!tour_item of !total',{'!tour_item':r+1,'!total':o.length});if(r===o.length-1){o[r].cancelText=e.t('End tour')}});this.model.set('tour',o)}}});e.tour.nextButton=function(t,o){return{classes:'button button--primary',text:o.cancelText?o.cancelText:e.t('Next'),action:o.cancelText?t.cancel:t.next}};e.theme.tourItemContent=function(t){return''.concat(t.body,'<div class="tour-progress">').concat(t.counter,'</div>')}})(jQuery,Backbone,Drupal,drupalSettings,document,window.Shepherd);
/* Source and licensing information for the above line(s) can be found at http://www.snorkellifts.com/core/modules/tour/js/tour.js. */