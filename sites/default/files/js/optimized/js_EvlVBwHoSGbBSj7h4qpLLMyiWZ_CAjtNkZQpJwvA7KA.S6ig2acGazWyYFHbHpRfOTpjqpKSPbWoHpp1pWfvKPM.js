/* Source and licensing information for the line(s) below can be found at http://www.snorkellifts.com/modules/contrib/yoast_seo/js/yoast_seo.js. */
(function(t){'use strict';Drupal.yoast_seo=Drupal.yoast_seo||{};Drupal.yoast_seo_node_new=!1;Drupal.behaviors.yoast_seo={attach:function(i,a){if(typeof a.yoast_seo==='undefined'){throw'No settings specified for the YoastSEO analysis library.'};once('realtime-seo','body',i).forEach(function(){var i=t('form').first();window.orchestrator=new e(i,a.yoast_seo)});if(typeof CKEDITOR!=='undefined'){CKEDITOR.on('instanceReady',function(t){var e=t.editor;if(!e.yoast_seo_changed){e.on('blur',function(){e.updateElement();window.orchestrator.scheduleUpdate()});e.yoast_seo_changed=!0}})}}};function i(e){if(!String.prototype.endsWith){String.prototype.endsWith=function(t,e){if(!(e<this.length)){e=this.length}
else{e|=0};return this.substr(e-t.length,t.length)===t}};if(typeof e.targets!=='object'){throw'`targets` is a required Orchestrator argument, `targets` is not an object.'}
else{for(var i in e.targets){if(i.endsWith('target_id')){var a=i.substr(0,i.length-'_target_id'.length);e.targets[a]=e.targets[i];delete e.targets[i]}}};if(typeof RealTimeSEO==='undefined'){t('#'+e.targets.output).html('<p><strong>'+Drupal.t('It looks like something went wrong when we tried to load the Real-Time SEO content analysis library. Please check it the module is installed correctly.')+'</strong></p>');throw'RealTimeSEO is not defined. Is the library attached?'}};var e=function(t,e){i(e);this.$form=t;this.config=e;this.configureCallbacks();this.initializeApp()};e.prototype.configureCallbacks=function(){var t={getData:this.getData.bind(this),saveScores:this.saveScores.bind(this),saveContentScore:this.saveContentScore.bind(this)};this.config.callbacks=Object.assign(t,this.config.callbacks)};e.prototype.initializeApp=function(){if(typeof this.app!=='undefined'){return};var e=this;jQuery('body').on('updateSeoData',function(t,i){e.setData(i)});this.$form.change(this.handleChange.bind(this));once('yoast_seo-editable','#yoast-snippet',this.$form.get(0)).forEach(el=>t(el).focusout(this.handleBlur.bind(this)));setTimeout(function(){if(typeof CKEDITOR!=='undefined'){for(var t in CKEDITOR.instances){CKEDITOR.instances[t].on('blur',e.handleBlur.bind(e))}}},200);this.data={meta:'',metaTitle:'',locale:'en_US',keyword:jQuery('[data-drupal-selector='+this.config.fields.focus_keyword+']').val()};this.app=new RealTimeSEO.App(this.config);this.refreshData()};e.prototype.handleChange=function(e){var i=t(e.target);if(i.attr('data-drupal-selector')===this.config.fields.focus_keyword){this.setData({keyword:i.val()});return};this.scheduleUpdate()};e.prototype.handleBlur=function(e){var i=t(e.target);if(i.is('.title.editable')){jQuery('[data-drupal-selector="'+this.config.fields.edit_title+'"').val(i.text())}
else if(i.is('.desc.editable')){jQuery('[data-drupal-selector="'+this.config.fields.edit_description+'"').val(i.text())};this.scheduleUpdate()};e.prototype.scheduleUpdate=function(){if(this.update_timeout){clearTimeout(this.update_timeout);this.update_timeout=!1};var t=this;this.update_timeout=setTimeout(function(){t.update_timeout=!1;t.refreshData()},500)};e.prototype.analyze=function(){this.app.getData();this.app.runAnalyzer()};e.prototype.refreshData=function(){if(!jQuery('.ajax-progress').length){this.$form.find('.yoast-seo-preview-submit-button').mousedown()}
else{this.scheduleUpdate()}};e.prototype.setData=function(t){this.data=Object.assign({},this.data,t);this.updatePreview();this.data.titleWidth=document.getElementById('snippet_title').offsetWidth;this.data.permalink=this.config.base_root+this.data.url;this.analyze()};e.prototype.getData=function(){return this.data};e.prototype.getDataFromInput=function(t){return'static'};e.prototype.saveScores=function(t){var e=0;if(typeof t==='number'&&t>0){e=(t/10)};document.getElementById(this.config.targets.overall_score).getElementsByClassName('score_value')[0].innerHTML=this.scoreToRating(e);document.querySelector('[data-drupal-selector="'+this.config.fields.seo_status+'"]').setAttribute('value',e)};e.prototype.scoreToRating=function(t){var i=Object.keys(this.config.score_rules).sort().reverse();for(var a in i){var e=i[a];if(t>=e){return this.config.score_rules[e]}};return Drupal.t('Unknown')};e.prototype.saveContentScore=function(t){};e.prototype.updatePreview=function(){var o=this.data.metaTitle;if(this.data.keyword){var t=this.data.metaTitle.toLowerCase().indexOf(this.data.keyword.toLowerCase()),e=this.data.keyword.length;if(t>-1&&e>0){o=this.data.metaTitle.substr(0,t)+'<strong>'+this.data.metaTitle.substr(t,e)+'</strong>'+this.data.metaTitle.substr(t+e)}};var s='title',n='';if(this.config.enable_editing.title){s+=' editable';n='contenteditable="true"'};var i='desc desc-default',a='';if(this.config.enable_editing.description){i+=' editable';a='contenteditable="true"'};document.getElementById(this.config.targets.snippet).innerHTML='<section class="snippet-editor__preview"><div class="snippet_container snippet-editor__container" id="title_container"><span class="'+s+'"'+n+' id="snippet_title">'+o+'</span></div><div class="snippet_container snippet-editor__container" id="url_container"><cite class="url urlBase" id="snippet_citeBase">'+this.config.base_root+'</cite><cite class="url" id="snippet_cite">'+this.data.url+'</cite></div><div class="snippet_container snippet-editor__container" id="meta_container"><span class="'+i+'"'+a+' id="snippet_meta">'+this.data.meta+'</span></div></section>'}})(jQuery);
/* Source and licensing information for the above line(s) can be found at http://www.snorkellifts.com/modules/contrib/yoast_seo/js/yoast_seo.js. */