/* Source and licensing information for the line(s) below can be found at http://snorkellifts.com/themes/sglobal/js/markerclusterer.js. */
;function MarkerClusterer(t,e,i){this.extend(MarkerClusterer,google.maps.OverlayView);this.map_=t;this.markers_=[];this.clusters_=[];this.sizes=[53,56,66,78,90];this.styles_=[];this.ready_=!1;var r=i||{};this.gridSize_=r['gridSize']||60;this.minClusterSize_=r['minimumClusterSize']||2;this.maxZoom_=r['maxZoom']||null;this.styles_=r['styles']||[];this.imagePath_=r['imagePath']||this.MARKER_CLUSTER_IMAGE_PATH_;this.imageExtension_=r['imageExtension']||this.MARKER_CLUSTER_IMAGE_EXTENSION_;this.zoomOnClick_=!0;if(r['zoomOnClick']!=undefined){this.zoomOnClick_=r['zoomOnClick']};this.averageCenter_=!1;if(r['averageCenter']!=undefined){this.averageCenter_=r['averageCenter']};this.setupStyles_();this.setMap(t);this.prevZoom_=this.map_.getZoom();var s=this;google.maps.event.addListener(this.map_,'zoom_changed',function(){var t=s.map_.getZoom();if(s.prevZoom_!=t){s.prevZoom_=t;s.resetViewport()}});google.maps.event.addListener(this.map_,'idle',function(){s.redraw()});if(e&&e.length){this.addMarkers(e,!1)}};MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_='sites/default/files/geofieldmap_icons/m';MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_='png';MarkerClusterer.prototype.extend=function(t,e){return(function(t){for(var e in t.prototype){this.prototype[e]=t.prototype[e]};return this}).apply(t,[e])};MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)};MarkerClusterer.prototype.draw=function(){};MarkerClusterer.prototype.setupStyles_=function(){if(this.styles_.length){return};for(var t=0,e;e=this.sizes[t];t++){this.styles_.push({url:this.imagePath_+(t+1)+'.'+this.imageExtension_,height:e,width:e})}};MarkerClusterer.prototype.fitMapToMarkers=function(){var s=this.getMarkers(),r=new google.maps.LatLngBounds();for(var t=0,e;e=s[t];t++){r.extend(e.getPosition())};this.map_.fitBounds(r)};MarkerClusterer.prototype.setStyles=function(t){this.styles_=t};MarkerClusterer.prototype.getStyles=function(){return this.styles_};MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_};MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};MarkerClusterer.prototype.setMaxZoom=function(t){this.maxZoom_=t};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.calculator_=function(t,e){var r=0,i=t.length,s=i;while(s!==0){s=parseInt(s/10,10);r++};r=Math.min(r,e);return{text:i,index:r}};MarkerClusterer.prototype.setCalculator=function(t){this.calculator_=t};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.addMarkers=function(t,e){for(var r=0,s;s=t[r];r++){this.pushMarkerTo_(s)};if(!e){this.redraw()}};MarkerClusterer.prototype.pushMarkerTo_=function(t){t.isAdded=!1;if(t['draggable']){var e=this;google.maps.event.addListener(t,'dragend',function(){t.isAdded=!1;e.repaint()})};this.markers_.push(t)};MarkerClusterer.prototype.addMarker=function(t,e){this.pushMarkerTo_(t);if(!e){this.redraw()}};MarkerClusterer.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf){e=this.markers_.indexOf(t)}
else{for(var r=0,s;s=this.markers_[r];r++){if(s==t){e=r;break}}};if(e==-1){return!1};t.setMap(null);this.markers_.splice(e,1);return!0};MarkerClusterer.prototype.removeMarker=function(t,e){var r=this.removeMarker_(t);if(!e&&r){this.resetViewport();this.redraw();return!0}
else{return!1}};MarkerClusterer.prototype.removeMarkers=function(t,e){var r=!1;for(var s=0,i;i=t[s];s++){var o=this.removeMarker_(i);r=r||o};if(!e&&r){this.resetViewport();this.redraw();return!0}};MarkerClusterer.prototype.setReady_=function(t){if(!this.ready_){this.ready_=t;this.createClusters_()}};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.getMap=function(){return this.map_};MarkerClusterer.prototype.setMap=function(t){this.map_=t};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};MarkerClusterer.prototype.setGridSize=function(t){this.gridSize_=t};MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinClusterSize=function(t){this.minClusterSize_=t};MarkerClusterer.prototype.getExtendedBounds=function(t){var e=this.getProjection(),n=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),a=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),s=e.fromLatLngToDivPixel(n);s.x+=this.gridSize_;s.y-=this.gridSize_;var r=e.fromLatLngToDivPixel(a);r.x-=this.gridSize_;r.y+=this.gridSize_;var i=e.fromDivPixelToLatLng(s),o=e.fromDivPixelToLatLng(r);t.extend(i);t.extend(o);return t};MarkerClusterer.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0);this.markers_=[]};MarkerClusterer.prototype.resetViewport=function(t){for(var e=0,s;s=this.clusters_[e];e++){s.remove()};for(var e=0,r;r=this.markers_[e];e++){r.isAdded=!1;if(t){r.setMap(null)}};this.clusters_=[]};MarkerClusterer.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0;this.resetViewport();this.redraw();window.setTimeout(function(){for(var e=0,r;r=t[e];e++){r.remove()}},0)};MarkerClusterer.prototype.redraw=function(){this.createClusters_()};MarkerClusterer.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e){return 0};var o=6371,r=(e.lat()-t.lat())*Math.PI/180,s=(e.lng()-t.lng())*Math.PI/180,i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2),n=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),a=o*n;return a};MarkerClusterer.prototype.addToClosestCluster_=function(t){var n=40000,r=null,a=t.getPosition();for(var o=0,e;e=this.clusters_[o];o++){var i=e.getCenter();if(i){var s=this.distanceBetweenPoints_(i,t.getPosition());if(s<n){n=s;r=e}}};if(r&&r.isMarkerInClusterBounds(t)){r.addMarker(t)}
else{var e=new Cluster(this);e.addMarker(t);this.clusters_.push(e)}};MarkerClusterer.prototype.createClusters_=function(){if(!this.ready_){return};var r=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),s=this.getExtendedBounds(r);for(var e=0,t;t=this.markers_[e];e++){if(!t.isAdded&&this.isMarkerInBounds_(t,s)){this.addToClosestCluster_(t)}}};function Cluster(t){this.markerClusterer_=t;this.map_=t.getMap();this.gridSize_=t.getGridSize();this.minClusterSize_=t.getMinClusterSize();this.averageCenter_=t.isAverageCenter();this.center_=null;this.markers_=[];this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,t.getStyles(),t.getGridSize())};Cluster.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf){return this.markers_.indexOf(t)!=-1}
else{for(var e=0,r;r=this.markers_[e];e++){if(r==t){return!0}}};return!1};Cluster.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t)){return!1};if(!this.center_){this.center_=t.getPosition();this.calculateBounds_()}
else{if(this.averageCenter_){var r=this.markers_.length+1,i=(this.center_.lat()*(r-1)+t.getPosition().lat())/r,o=(this.center_.lng()*(r-1)+t.getPosition().lng())/r;this.center_=new google.maps.LatLng(i,o);this.calculateBounds_()}};t.isAdded=!0;this.markers_.push(t);var e=this.markers_.length;if(e<this.minClusterSize_&&t.getMap()!=this.map_){t.setMap(this.map_)};if(e==this.minClusterSize_){for(var s=0;s<e;s++){this.markers_[s].setMap(null)}};if(e>=this.minClusterSize_){t.setMap(null)};this.updateIcon();return!0};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){var r=new google.maps.LatLngBounds(this.center_,this.center_),s=this.getMarkers();for(var t=0,e;e=s[t];t++){r.extend(e.getPosition())};return r};Cluster.prototype.remove=function(){this.clusterIcon_.remove();this.markers_.length=0;delete this.markers_};Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getMarkers=function(){return this.markers_};Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)};Cluster.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())};Cluster.prototype.getMap=function(){return this.map_};Cluster.prototype.updateIcon=function(){var o=this.map_.getZoom(),r=this.markerClusterer_.getMaxZoom();if(r&&o>r){for(var t=0,e;e=this.markers_[t];t++){e.setMap(this.map_)};return};if(this.markers_.length<this.minClusterSize_){this.clusterIcon_.hide();return};var s=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,s);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.setSums(i);this.clusterIcon_.show()};function ClusterIcon(t,e,r){t.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.styles_=e;this.padding_=r||0;this.cluster_=t;this.center_=null;this.map_=t.getMap();this.div_=null;this.sums_=null;this.visible_=!1;this.setMap(this.map_)};ClusterIcon.prototype.triggerClusterClick=function(t){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,'clusterclick',this.cluster_,t);if(e.isZoomOnClick()){this.map_.fitBounds(this.cluster_.getBounds())}};ClusterIcon.prototype.onAdd=function(){this.div_=document.createElement('DIV');if(this.visible_){var s=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(s);this.div_.innerHTML=this.sums_.text};var r=this.getPanes();r.overlayMouseTarget.appendChild(this.div_);var e=this,t=!1;google.maps.event.addDomListener(this.div_,'click',function(r){if(!t){e.triggerClusterClick(r)}});google.maps.event.addDomListener(this.div_,'mousedown',function(){t=!1});google.maps.event.addDomListener(this.div_,'mousemove',function(){t=!0})};ClusterIcon.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);if(typeof this.iconAnchor_==='object'&&this.iconAnchor_.length===2){e.x-=this.iconAnchor_[0];e.y-=this.iconAnchor_[1]}
else{e.x-=parseInt(this.width_/2,10);e.y-=parseInt(this.height_/2,10)};return e};ClusterIcon.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+'px';this.div_.style.left=t.x+'px'}};ClusterIcon.prototype.hide=function(){if(this.div_){this.div_.style.display='none'};this.visible_=!1};ClusterIcon.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t);this.div_.style.display=''};this.visible_=!0};ClusterIcon.prototype.remove=function(){this.setMap(null)};ClusterIcon.prototype.onRemove=function(){if(this.div_&&this.div_.parentNode){this.hide();this.div_.parentNode.removeChild(this.div_);this.div_=null}};ClusterIcon.prototype.setSums=function(t){this.sums_=t;this.text_=t.text;this.index_=t.index;if(this.div_){this.div_.innerHTML=t.text};this.useStyle()};ClusterIcon.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t['url'];this.height_=t['height'];this.width_=t['width'];this.textColor_=t['textColor'];this.anchor_=t['anchor'];this.textSize_=t['textSize'];this.backgroundPosition_=t['backgroundPosition'];this.iconAnchor_=t['iconAnchor']};ClusterIcon.prototype.setCenter=function(t){this.center_=t};ClusterIcon.prototype.createCss=function(t){var e=[];e.push('background-image:url('+this.url_+');');var i=this.backgroundPosition_?this.backgroundPosition_:'0 0';e.push('background-position:'+i+';');if(typeof this.anchor_==='object'){if(typeof this.anchor_[0]==='number'&&this.anchor_[0]>0&&this.anchor_[0]<this.height_){e.push('height:'+(this.height_-this.anchor_[0])+'px; padding-top:'+this.anchor_[0]+'px;')}
else if(typeof this.anchor_[0]==='number'&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_){e.push('height:'+this.height_+'px; line-height:'+(this.height_+this.anchor_[0])+'px;')}
else{e.push('height:'+this.height_+'px; line-height:'+this.height_+'px;')};if(typeof this.anchor_[1]==='number'&&this.anchor_[1]>0&&this.anchor_[1]<this.width_){e.push('width:'+(this.width_-this.anchor_[1])+'px; padding-left:'+this.anchor_[1]+'px;')}
else{e.push('width:'+this.width_+'px; text-align:center;')}}
else{e.push('height:'+this.height_+'px; line-height:'+this.height_+'px; width:'+this.width_+'px; text-align:center;')};var r=this.textColor_?this.textColor_:'black',s=this.textSize_?this.textSize_:12;e.push('cursor:pointer; top:'+t.y+'px; left:'+t.x+'px; color:'+r+'; position:absolute; font-size:'+s+'px; font-family:Arial,sans-serif; font-weight:bold');return e.join('')};window['MarkerClusterer']=MarkerClusterer;MarkerClusterer.prototype['addMarker']=MarkerClusterer.prototype.addMarker;MarkerClusterer.prototype['addMarkers']=MarkerClusterer.prototype.addMarkers;MarkerClusterer.prototype['clearMarkers']=MarkerClusterer.prototype.clearMarkers;MarkerClusterer.prototype['fitMapToMarkers']=MarkerClusterer.prototype.fitMapToMarkers;MarkerClusterer.prototype['getCalculator']=MarkerClusterer.prototype.getCalculator;MarkerClusterer.prototype['getGridSize']=MarkerClusterer.prototype.getGridSize;MarkerClusterer.prototype['getExtendedBounds']=MarkerClusterer.prototype.getExtendedBounds;MarkerClusterer.prototype['getMap']=MarkerClusterer.prototype.getMap;MarkerClusterer.prototype['getMarkers']=MarkerClusterer.prototype.getMarkers;MarkerClusterer.prototype['getMaxZoom']=MarkerClusterer.prototype.getMaxZoom;MarkerClusterer.prototype['getStyles']=MarkerClusterer.prototype.getStyles;MarkerClusterer.prototype['getTotalClusters']=MarkerClusterer.prototype.getTotalClusters;MarkerClusterer.prototype['getTotalMarkers']=MarkerClusterer.prototype.getTotalMarkers;MarkerClusterer.prototype['redraw']=MarkerClusterer.prototype.redraw;MarkerClusterer.prototype['removeMarker']=MarkerClusterer.prototype.removeMarker;MarkerClusterer.prototype['removeMarkers']=MarkerClusterer.prototype.removeMarkers;MarkerClusterer.prototype['resetViewport']=MarkerClusterer.prototype.resetViewport;MarkerClusterer.prototype['repaint']=MarkerClusterer.prototype.repaint;MarkerClusterer.prototype['setCalculator']=MarkerClusterer.prototype.setCalculator;MarkerClusterer.prototype['setGridSize']=MarkerClusterer.prototype.setGridSize;MarkerClusterer.prototype['setMaxZoom']=MarkerClusterer.prototype.setMaxZoom;MarkerClusterer.prototype['onAdd']=MarkerClusterer.prototype.onAdd;MarkerClusterer.prototype['draw']=MarkerClusterer.prototype.draw;Cluster.prototype['getCenter']=Cluster.prototype.getCenter;Cluster.prototype['getSize']=Cluster.prototype.getSize;Cluster.prototype['getMarkers']=Cluster.prototype.getMarkers;ClusterIcon.prototype['onAdd']=ClusterIcon.prototype.onAdd;ClusterIcon.prototype['draw']=ClusterIcon.prototype.draw;ClusterIcon.prototype['onRemove']=ClusterIcon.prototype.onRemove;
/* Source and licensing information for the above line(s) can be found at http://snorkellifts.com/themes/sglobal/js/markerclusterer.js. */