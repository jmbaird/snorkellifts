/* Source and licensing information for the line(s) below can be found at http://www.snorkellifts.com/themes/sglobal/js/jquery.storelocator.js. */
/*! jQuery Google Maps Store Locator - v3.1.2 - 2021-01-12
* http://www.bjornblog.com/web/jquery-store-locator-plugin
* Copyright (c) 2021 Bjorn Holine; Licensed MIT */
;(function(t,i,n,f){'use strict';var o='storeLocator';if(typeof t.fn[o]!=='undefined'||typeof google==='undefined'){return};var p,A,D,w,v,m,C,y,k,c,r,l,g,L,b,P,O,M,h,T,d=[],e=[],I=[],u=[],a={},S={},x={},s={};var R={'ajaxData':null,'altDistanceNoResult':!1,'autoComplete':!1,'autoCompleteDisableListener':!1,'autoCompleteOptions':{},'autoGeocode':!1,'bounceMarker':!0,'catMarkers':null,'dataLocation':'data/locations.json','dataRaw':null,'dataType':'json','debug':!1,'defaultLat':null,'defaultLng':null,'defaultLoc':!1,'disableAlphaMarkers':!1,'distanceAlert':60,'dragSearch':!1,'exclusiveFiltering':!1,'exclusiveTax':null,'featuredDistance':null,'featuredLocations':!1,'fullMapStart':!1,'fullMapStartBlank':!1,'fullMapStartListLimit':!1,'infoBubble':null,'inlineDirections':!1,'lengthUnit':'m','listColor1':'#ffffff','listColor2':'#eeeeee','loading':!1,'locationsPerPage':10,'mapSettings':{mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:12,},'markerCluster':null,'markerImg':null,'markerDim':null,'maxDistance':!1,'modal':!1,'nameAttribute':'name','nameSearch':!1,'noForm':!1,'openNearest':!1,'originMarker':!1,'originMarkerDim':null,'originMarkerImg':null,'pagination':!1,'querystringParams':!1,'selectedMarkerImg':null,'selectedMarkerImgDim':null,'sessionStorage':!1,'slideMap':!0,'sortBy':null,'storeLimit':26,'taxonomyFilters':null,'visibleMarkersList':!1,'xmlElement':'marker','addressID':'bh-sl-address','closeIcon':'bh-sl-close-icon','formContainer':'bh-sl-form-container','formID':'bh-sl-user-location','geocodeID':null,'lengthSwapID':'bh-sl-length-swap','loadingContainer':'bh-sl-loading','locationList':'bh-sl-loc-list','mapID':'bh-sl-map','maxDistanceID':'bh-sl-maxdistance','modalContent':'bh-sl-modal-content','modalWindow':'bh-sl-modal-window','orderID':'bh-sl-order','overlay':'bh-sl-overlay','regionID':'bh-sl-region','searchID':'bh-sl-search','sortID':'bh-sl-sort','taxonomyFiltersContainer':'bh-sl-filters-container','infowindowTemplatePath':'assets/js/plugins/storeLocator/templates/infowindow-description.html','listTemplatePath':'assets/js/plugins/storeLocator/templates/location-list-description.html','KMLinfowindowTemplatePath':'assets/js/plugins/storeLocator/templates/kml-infowindow-description.html','KMLlistTemplatePath':'assets/js/plugins/storeLocator/templates/kml-location-list-description.html','listTemplateID':null,'infowindowTemplateID':null,'callbackAutoGeoSuccess':null,'callbackBeforeSend':null,'callbackCloseDirections':null,'callbackCreateMarker':null,'callbackDirectionsRequest':null,'callbackFilters':null,'callbackFormVals':null,'callbackGeocodeRestrictions':null,'callbackJsonp':null,'callbackListClick':null,'callbackMapSet':null,'callbackMarkerClick':null,'callbackModalClose':null,'callbackModalOpen':null,'callbackModalReady':null,'callbackNearestLoc':null,'callbackNoResults':null,'callbackNotify':null,'callbackOrder':null,'callbackPageChange':null,'callbackRegion':null,'callbackSorting':null,'callbackSuccess':null,'addressErrorAlert':'Unable to find address','autoGeocodeErrorAlert':'Automatic location detection failed. Please fill in your address or zip code.','distanceErrorAlert':'Unfortunately, our closest location is more than ','kilometerLang':'kilometer','kilometersLang':'kilometers','mileLang':'mile','milesLang':'miles','noResultsTitle':'No results','noResultsDesc':'No locations were found with the given criteria. Please modify your selections or input.','nextPage':'Next &raquo;','prevPage':'&laquo; Prev'};function F(e,s){p=t(e);this.element=e;this.settings=t.extend({},R,s);this._defaults=R;this._name=o;this.init()};t.extend(F.prototype,{init:function(){var i=this;this.writeDebug('init');if(this.settings.lengthUnit==='km'){x.EarthRadius=6367.0}
else{x.EarthRadius=3956.0};if(this.settings.dataType==='kml'){v='xml'}
else{v=this.settings.dataType};if(this.settings.inlineDirections===!0){t('.'+this.settings.locationList).prepend('<div class="bh-sl-directions-panel"></div>')};y=this.settings.mapSettings.zoom;Handlebars.registerHelper('niceURL',function(t){if(t){return t.replace('https://','').replace('http://','')}});if(this.settings.taxonomyFilters!==null){this.taxonomyFiltering()};this.sorting();this.order();if(this.settings.modal===!0){if(this.settings.taxonomyFilters!==null){t('.'+this.settings.taxonomyFiltersContainer).clone(!0,!0).prependTo(p)};p.wrap('<div class="'+this.settings.overlay+'"><div class="'+this.settings.modalWindow+'"><div class="'+this.settings.modalContent+'">');t('.'+this.settings.modalWindow).prepend('<div class="'+this.settings.closeIcon+'"></div>');t('.'+this.settings.overlay).hide()};if(this.settings.autoComplete===!0){var e=n.getElementById(this.settings.addressID),s=new google.maps.places.Autocomplete(e,this.settings.autoCompleteOptions);if(this.settings.autoComplete===!0&&this.settings.autoCompleteDisableListener!==!0){s.addListener('place_changed',function(t){i.processForm(t)})}};this._loadTemplates()},destroy:function(){this.writeDebug('destroy');this.reset();var s=t('#'+this.settings.mapID);if(u.length){for(var e=0;e<=u.length;e++){google.maps.event.removeListener(u[e])}};t('.'+this.settings.locationList+' ul').empty();if(s.hasClass('bh-sl-map-open')){s.empty().removeClass('bh-sl-map-open')};if(this.settings.modal===!0){t('. '+this.settings.overlay).remove()};s.attr('style','');p.hide();t.removeData(p.get(0));t(n).off(o);p.unbind()},reset:function(){this.writeDebug('reset');e=[];d=[];I=[];u=[];h=!1;t(n).off('click.'+o,'.'+this.settings.locationList+' li');if(t('.'+this.settings.locationList+' .bh-sl-close-directions-container').length){t('.bh-sl-close-directions-container').remove()};if(this.settings.inlineDirections===!0){var s=t('.'+this.settings.locationList+' .adp');if(s.length>0){s.remove();t('.'+this.settings.locationList+' ul').fadeIn()};t(n).off('click','.'+this.settings.locationList+' li .loc-directions a')};if(this.settings.pagination===!0){t(n).off('click.'+o,'.bh-sl-pagination li')}},formFiltersReset:function(){this.writeDebug('formFiltersReset');if(this.settings.taxonomyFilters===null){return};var e=t('.'+this.settings.taxonomyFiltersContainer+' input'),s=t('.'+this.settings.taxonomyFiltersContainer+' select');if(typeof(e)!=='object'){return};e.each(function(){if(t(this).is('input[type="checkbox"]')||t(this).is('input[type="radio"]')){t(this).prop('checked',!1)}});s.each(function(){t(this).prop('selectedIndex',0)})},mapReload:function(){this.writeDebug('mapReload');this.reset();T=!0;if(this.settings.taxonomyFilters!==null){this.formFiltersReset();this.taxonomyFiltersInit()};if((l)&&(g)){this.settings.mapSettings.zoom=y;this.processForm()}
else{this.mapping(s)}},notify:function(t){this.writeDebug('notify',t);if(this.settings.callbackNotify){this.settings.callbackNotify.call(this,t)}
else{alert(t)}},geoCodeCalcToRadian:function(t){this.writeDebug('geoCodeCalcToRadian',t);return t*(Math.PI/180)},geoCodeCalcDiffRadian:function(t,e){this.writeDebug('geoCodeCalcDiffRadian',arguments);return this.geoCodeCalcToRadian(e)-this.geoCodeCalcToRadian(t)},geoCodeCalcCalcDistance:function(t,e,s,i,n){this.writeDebug('geoCodeCalcCalcDistance',arguments);return n*2*Math.asin(Math.min(1,Math.sqrt((Math.pow(Math.sin((this.geoCodeCalcDiffRadian(t,s))/2.0),2.0)+Math.cos(this.geoCodeCalcToRadian(t))*Math.cos(this.geoCodeCalcToRadian(s))*Math.pow(Math.sin((this.geoCodeCalcDiffRadian(e,i))/2.0),2.0)))))},getQueryString:function(t){this.writeDebug('getQueryString',t);if(t){t=t.replace(/[\[]/,'\\[').replace(/[\]]/,'\\]');var s=new RegExp('[\\?&]'+t+'=([^&#]*)'),e=s.exec(location.search);return(e===null)?'':decodeURIComponent(e[1].replace(/\+/g,' '))}},getMap:function(){return this.map},_loadTemplates:function(){this.writeDebug('_loadTemplates');var e,s=this,i='<div class="bh-sl-error">Error: Could not load plugin templates. Check the paths and ensure they have been uploaded. Paths will be wrong if you do not run this from a web server.</div>';if(this.settings.dataType==='kml'&&this.settings.listTemplateID===null&&this.settings.infowindowTemplateID===null){t.when(t.get(this.settings.KMLinfowindowTemplatePath,function(t){e=t;w=Handlebars.compile(e)}),t.get(this.settings.KMLlistTemplatePath,function(t){e=t;D=Handlebars.compile(e)})).then(function(){s.locator()},function(){t('.'+s.settings.formContainer).append(i);throw new Error('Could not load storeLocator plugin templates')})}
else if(this.settings.listTemplateID!==null&&this.settings.infowindowTemplateID!==null){w=Handlebars.compile(t('#'+this.settings.infowindowTemplateID).html());D=Handlebars.compile(t('#'+this.settings.listTemplateID).html());s.locator()}
else{t.when(t.get(this.settings.infowindowTemplatePath,function(t){e=t;w=Handlebars.compile(e)}),t.get(this.settings.listTemplatePath,function(t){e=t;D=Handlebars.compile(e)})).then(function(){s.locator()},function(){t('.'+s.settings.formContainer).append(i);throw new Error('Could not load storeLocator plugin templates')})}},locator:function(){this.writeDebug('locator');if(this.settings.slideMap===!0){p.hide()};this._start();this._formEventHandler()},_formEventHandler:function(){this.writeDebug('_formEventHandler');var e=this;if(this.settings.noForm===!0){t(n).on('click.'+o,'.'+this.settings.formContainer+' button',function(t){e.processForm(t)});t(n).on('keydown.'+o,function(s){if(s.keyCode===13&&t('#'+e.settings.addressID).is(':focus')){e.processForm(s)}})}
else{t(n).on('submit.'+o,'#'+this.settings.formID,function(t){e.processForm(t)})};if(t('.bh-sl-reset').length&&t('#'+this.settings.mapID).length){t(n).on('click.'+o,'.bh-sl-reset',function(){e.mapReload()})}},_getData:function(e,s,i,n,o){this.writeDebug('_getData',arguments);var a=this,l='',g='',c='';if(typeof n!=='undefined'&&typeof n.geometry.bounds!=='undefined'){c=n.formatted_address;l=JSON.stringify(n.geometry.bounds.getNorthEast());g=JSON.stringify(n.geometry.bounds.getSouthWest())};if(this.settings.callbackBeforeSend){this.settings.callbackBeforeSend.call(this,e,s,i,c,l,g,o)};if(a.settings.dataRaw!==null){if(v==='xml'){return t.parseXML(a.settings.dataRaw)}
else if(v==='json'){if(Array.isArray&&Array.isArray(a.settings.dataRaw)){return a.settings.dataRaw}
else if(typeof a.settings.dataRaw==='string'){return JSON.parse(a.settings.dataRaw)}
else{return[]}}}
else{var r=t.Deferred();if(this.settings.loading===!0){t('.'+this.settings.formContainer).append('<div class="'+this.settings.loadingContainer+'"></div>')};var u={'origLat':e,'origLng':s,'origAddress':i,'formattedAddress':c,'boundsNorthEast':l,'boundsSouthWest':g};if(this.settings.ajaxData!==null&&typeof this.settings.ajaxData==='object'){t.extend(u,this.settings.ajaxData)};t.ajax({type:'GET',url:this.settings.dataLocation+(this.settings.dataType==='jsonp'?(this.settings.dataLocation.match(/\?/)?'&':'?')+'callback=?':''),data:u,dataType:v,jsonpCallback:(this.settings.dataType==='jsonp'?this.settings.callbackJsonp:null)}).done(function(e){r.resolve(e);if(a.settings.loading===!0){t('.'+a.settings.formContainer+' .'+a.settings.loadingContainer).remove()}}).fail(r.reject);return r.promise()}},_start:function(){this.writeDebug('_start');var e=this,a=this.settings.autoGeocode,r;if(e.settings.fullMapStartBlank!==!1){var l=t('#'+e.settings.mapID);l.addClass('bh-sl-map-open');var s=e.settings.mapSettings;s.zoom=e.settings.fullMapStartBlank;r=new google.maps.LatLng(this.settings.defaultLat,this.settings.defaultLng);s.center=r;e.map=new google.maps.Map(n.getElementById(e.settings.mapID),s);google.maps.event.addDomListener(i,'resize',function(){var t=e.map.getCenter();google.maps.event.trigger(e.map,'resize');e.map.setCenter(t)});e.settings.fullMapStartBlank=!1;s.zoom=y}
else{if(this.settings.defaultLoc===!0){this.defaultLocation()};if(t.trim(t('#'+this.settings.addressID).val())!==''){e.writeDebug('Using Address Field');e.processForm(null);a=!1}
else if(this.settings.fullMapStart===!0){if((this.settings.querystringParams===!0&&this.getQueryString(this.settings.addressID))||(this.settings.querystringParams===!0&&this.getQueryString(this.settings.searchID))||(this.settings.querystringParams===!0&&this.getQueryString(this.settings.maxDistanceID))){e.writeDebug('Using Query String');this.processForm(null);a=!1}
else{this.mapping(null)}}};if(this.settings.autoGeocode===!0&&a===!0){e.writeDebug('Auto Geo');e.htmlGeocode()};if(this.settings.autoGeocode!==null){e.writeDebug('Button Geo');t(n).on('click.'+o,'#'+this.settings.geocodeID,function(){e.htmlGeocode()})}},htmlGeocode:function(){this.writeDebug('htmlGeocode',arguments);var t=this;if(t.settings.sessionStorage===!0&&i.sessionStorage&&i.sessionStorage.getItem('myGeo')){t.writeDebug('Using Session Saved Values for GEO');t.autoGeocodeQuery(JSON.parse(i.sessionStorage.getItem('myGeo')));return!1}
else if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(e){t.writeDebug('Current Position Result');var s={coords:{latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy}};if(t.settings.sessionStorage===!0&&i.sessionStorage){i.sessionStorage.setItem('myGeo',JSON.stringify(s))};if(t.settings.callbackAutoGeoSuccess){t.settings.callbackAutoGeoSuccess.call(this,s)};t.autoGeocodeQuery(s)},function(e){t._autoGeocodeError(e)})}},googleGeocode:function(t){t.writeDebug('googleGeocode',arguments);var e=new google.maps.Geocoder();this.geocode=function(t,s){e.geocode(t,function(t,e){if(e===google.maps.GeocoderStatus.OK){var i={};i.latitude=t[0].geometry.location.lat();i.longitude=t[0].geometry.location.lng();i.geocodeResult=t[0];s(i)}
else{s(null);throw new Error('Geocode was not successful for the following reason: '+e)}})}},reverseGoogleGeocode:function(t){t.writeDebug('reverseGoogleGeocode',arguments);var e=new google.maps.Geocoder();this.geocode=function(t,s){e.geocode(t,function(t,e){if(e===google.maps.GeocoderStatus.OK){if(t[0]){var i={};i.address=t[0].formatted_address;i.fullResult=t[0];s(i)}}
else{s(null);throw new Error('Reverse geocode was not successful for the following reason: '+e)}})}},roundNumber:function(t,e){this.writeDebug('roundNumber',arguments);return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},isEmptyObject:function(t){this.writeDebug('isEmptyObject',arguments);for(var e in t){if(t.hasOwnProperty(e)){return!1}};return!0},hasEmptyObjectVals:function(t){this.writeDebug('hasEmptyObjectVals',arguments);var s=!0;for(var e in t){if(t.hasOwnProperty(e)){if(t[e]!==''&&t[e].length!==0){s=!1}}};return s},modalClose:function(){this.writeDebug('modalClose');if(this.settings.callbackModalClose){this.settings.callbackModalClose.call(this)};a={};t('.'+this.settings.overlay+' select').prop('selectedIndex',0);t('.'+this.settings.overlay+' input').prop('checked',!1);t('.'+this.settings.overlay).hide()},_createLocationVariables:function(t){this.writeDebug('_createLocationVariables',arguments);var i;S={};for(var s in e[t]){if(e[t].hasOwnProperty(s)){i=e[t][s];if(s==='distance'||s==='altdistance'){i=this.roundNumber(i,2)};S[s]=i}}},sortAlpha:function(t){this.writeDebug('sortAlpha',arguments);var e=(this.settings.sortBy.hasOwnProperty('prop')&&typeof this.settings.sortBy.prop!=='undefined')?this.settings.sortBy.prop:'name';if(this.settings.sortBy.hasOwnProperty('order')&&this.settings.sortBy.order.toString()==='desc'){t.sort(function(t,s){return s[e].toLowerCase().localeCompare(t[e].toLowerCase())})}
else{t.sort(function(t,s){return t[e].toLowerCase().localeCompare(s[e].toLowerCase())})}},sortDate:function(t){this.writeDebug('sortDate',arguments);var e=(this.settings.sortBy.hasOwnProperty('prop')&&typeof this.settings.sortBy.prop!=='undefined')?this.settings.sortBy.prop:'date';if(this.settings.sortBy.hasOwnProperty('order')&&this.settings.sortBy.order.toString()==='desc'){t.sort(function(t,s){return new Date(s[e]).getTime()-new Date(t[e]).getTime()})}
else{t.sort(function(t,s){return new Date(t[e]).getTime()-new Date(s[e]).getTime()})}},sortNumerically:function(t){this.writeDebug('sortNumerically',arguments);var e=(this.settings.sortBy!==null&&this.settings.sortBy.hasOwnProperty('prop')&&typeof this.settings.sortBy.prop!=='undefined')?this.settings.sortBy.prop:'distance';if(this.settings.sortBy!==null&&this.settings.sortBy.hasOwnProperty('order')&&this.settings.sortBy.order.toString()==='desc'){t.sort(function(t,s){return((s[e]<t[e])?-1:((s[e]>t[e])?1:0))})}
else{t.sort(function(t,s){return((t[e]<s[e])?-1:((t[e]>s[e])?1:0))})}},sortCustom:function(t){this.writeDebug('sortCustom',arguments);if(this.settings.sortBy.hasOwnProperty('method')&&this.settings.sortBy.method.toString()==='alpha'){this.sortAlpha(t)}
else if(this.settings.sortBy.hasOwnProperty('method')&&this.settings.sortBy.method.toString()==='date'){this.sortDate(t)}
else{this.sortNumerically(t)}},filterMatching:function(t,e,s){this.writeDebug('inclusiveFilter',arguments);s=(typeof s!=='undefined')?s:!0;var i;if(typeof e==='undefined'){return!1};if(!0===s){i=t.join('')}
else{i=t.join('|')};if((new RegExp(i,'i').test(e.replace(/([.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,'')))){return!0};return!1},filterData:function(t,e){this.writeDebug('filterData',arguments);var i=!1;for(var s in e){if(e.hasOwnProperty(s)){if(this.settings.exclusiveFiltering===!0||(this.settings.exclusiveTax!==null&&Array.isArray(this.settings.exclusiveTax)&&this.settings.exclusiveTax.indexOf(s)!==-1)){i=this.filterMatching(e[s],t[s],!1)}
else{i=this.filterMatching(e[s],t[s])}}};return i},_paginationOutput:function(t,e){this.writeDebug('_paginationOutput',arguments);t=parseFloat(t);var i='',a=t+1,o=t-1;if(t>0){i+='<li class="bh-sl-next-prev" data-page="'+o+'">'+this.settings.prevPage+'</li>'};for(var s=0;s<Math.ceil(e);s++){var n=s+1;if(s===t){i+='<li class="bh-sl-current" data-page="'+s+'">'+n+'</li>'}
else{i+='<li data-page="'+s+'">'+n+'</li>'}};if(a<e){i+='<li class="bh-sl-next-prev" data-page="'+a+'">'+this.settings.nextPage+'</li>'};return i},paginationSetup:function(s){this.writeDebug('paginationSetup',arguments);var n='',i,a=t('.bh-sl-pagination-container .bh-sl-pagination');if(this.settings.storeLimit===-1||e.length<this.settings.storeLimit){i=e.length/this.settings.locationsPerPage}
else{i=this.settings.storeLimit/this.settings.locationsPerPage};if(typeof s==='undefined'){s=0};if(a.length===0){n=this._paginationOutput(s,i)}
else{a.empty();n=this._paginationOutput(s,i)};a.append(n)},markerImage:function(t,e,s){this.writeDebug('markerImage',arguments);var i;if(typeof e!=='undefined'&&typeof s!=='undefined'){i={url:t,size:new google.maps.Size(e,s),scaledSize:new google.maps.Size(e,s)}}
else{i={url:t,size:new google.maps.Size(32,32),scaledSize:new google.maps.Size(32,32)}};return i},createMarker:function(t,e,s,i,a,n){this.writeDebug('createMarker',arguments);var g,l,c,r=[];if(this.settings.catMarkers!==null){if(typeof n!=='undefined'){if(n.indexOf(',')!==-1){r=n.split(',');for(var o=0;o<r.length;o++){if(r[o]in this.settings.catMarkers){l=this.markerImage(this.settings.catMarkers[r[o]][0],parseInt(this.settings.catMarkers[r[o]][1]),parseInt(this.settings.catMarkers[r[o]][2]))}}}
else{if(n in this.settings.catMarkers){l=this.markerImage(this.settings.catMarkers[n][0],parseInt(this.settings.catMarkers[n][1]),parseInt(this.settings.catMarkers[n][2]))}}}};if(this.settings.markerImg!==null){if(this.settings.markerDim===null){l=this.markerImage(this.settings.markerImg)}
else{l=this.markerImage(this.settings.markerImg,this.settings.markerDim.width,this.settings.markerDim.height)}};if(this.settings.callbackCreateMarker){g=this.settings.callbackCreateMarker.call(this,a,t,i,n)}
else{if(this.settings.disableAlphaMarkers===!0||this.settings.storeLimit===-1||this.settings.storeLimit>26||this.settings.catMarkers!==null||this.settings.markerImg!==null||(this.settings.fullMapStart===!0&&h===!0&&(isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||this.settings.fullMapStartListLimit===-1))){g=new google.maps.Marker({position:t,map:a,draggable:!1,icon:l})}
else{c={url:'https://mt.googleapis.com/vt/icon/name=icons/spotlight/spotlight-waypoint-b.png&text='+i+'&psize=16&font=fonts/Roboto-Regular.ttf&color=ff333333&ax=44&ay=48'};g=new google.maps.Marker({position:t,map:a,icon:c,draggable:!1})}};return g},_defineLocationData:function(e,s,i){this.writeDebug('_defineLocationData',arguments);var r='';this._createLocationVariables(e.get('id'));var n,a;if(S.distance<=1){if(this.settings.lengthUnit==='km'){a=this.settings.kilometerLang;n=this.settings.mileLang}
else{a=this.settings.mileLang;n=this.settings.kilometerLang}}
else{if(this.settings.lengthUnit==='km'){a=this.settings.kilometersLang;n=this.settings.milesLang}
else{a=this.settings.milesLang;n=this.settings.kilometersLang}};var o=e.get('id');if(this.settings.disableAlphaMarkers===!0||this.settings.storeLimit===-1||this.settings.storeLimit>26||(this.settings.fullMapStart===!0&&h===!0&&(isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||this.settings.fullMapStartListLimit===-1))){r=o+1}
else{if(i>0){r=String.fromCharCode('A'.charCodeAt(0)+(s+o))}
else{r=String.fromCharCode('A'.charCodeAt(0)+o)}};return{location:[t.extend(S,{'markerid':o,'marker':r,'altlength':n,'length':a,'origin':m})]}},listSetup:function(e,s,i){this.writeDebug('listSetup',arguments);var n=this._defineLocationData(e,s,i),a=D(n);t('.'+this.settings.locationList+' > ul').append(a)},changeSelectedMarker:function(t){var e;if(typeof M!=='undefined'){M.setIcon(O)};if(this.settings.selectedMarkerImgDim===null){e=this.markerImage(this.settings.selectedMarkerImg)}
else{e=this.markerImage(this.settings.selectedMarkerImg,this.settings.selectedMarkerImgDim.width,this.settings.selectedMarkerImgDim.height)};O=t.icon;t.setIcon(e);M=t},createInfowindow:function(s,i,n,a,r){this.writeDebug('createInfowindow',arguments);var o=this,g=this._defineLocationData(s,a,r),l=w(g);if(i==='left'){n.setContent(l);n.open(s.get('map'),s)}
else{google.maps.event.addListener(s,'click',function(){n.setContent(l);n.open(s.get('map'),s);var r=s.get('id'),i=t('.'+o.settings.locationList+' li[data-markerid='+r+']');if(i.length>0){if(o.settings.callbackMarkerClick){o.settings.callbackMarkerClick.call(this,s,r,i,e[r])};t('.'+o.settings.locationList+' li').removeClass('list-focus');i.addClass('list-focus');var a=t('.'+o.settings.locationList);a.animate({scrollTop:i.offset().top-a.offset().top+a.scrollTop()})};if(o.settings.selectedMarkerImg!==null){o.changeSelectedMarker(s)}})}},autoGeocodeQuery:function(e){this.writeDebug('autoGeocodeQuery',arguments);var n=this,i=null,a=t('#'+this.settings.maxDistanceID),o;if(this.settings.querystringParams===!0){if(this.getQueryString(this.settings.maxDistanceID)){i=this.getQueryString(this.settings.maxDistanceID);if(a.val()!==''){i=a.val()}}
else{if(this.settings.maxDistance===!0){i=a.val()||''}}}
else{if(this.settings.maxDistance===!0){i=a.val()||''}};var c=new this.reverseGoogleGeocode(this),u=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);c.geocode({'latLng':u},function(a){if(a!==null){o=r=a.address;l=s.lat=e.coords.latitude;g=s.lng=e.coords.longitude;s.origin=o;s.distance=i;n.mapping(s);if(typeof o!=='undefined'){t('#'+n.settings.addressID).val(o)}}
else{n.notify(n.settings.addressErrorAlert)}})},_autoGeocodeError:function(){this.writeDebug('_autoGeocodeError');this.notify(this.settings.autoGeocodeErrorAlert)},defaultLocation:function(){this.writeDebug('defaultLocation');var e=this,i=null,n=t('#'+this.settings.maxDistanceID),a;if(this.settings.querystringParams===!0){if(this.getQueryString(this.settings.maxDistanceID)){i=this.getQueryString(this.settings.maxDistanceID);if(n.val()!==''){i=n.val()}}
else{if(this.settings.maxDistance===!0){i=n.val()||''}}}
else{if(this.settings.maxDistance===!0){i=n.val()||''}};var o=new this.reverseGoogleGeocode(this),c=new google.maps.LatLng(this.settings.defaultLat,this.settings.defaultLng);o.geocode({'latLng':c},function(t){if(t!==null){a=r=t.address;l=s.lat=e.settings.defaultLat;g=s.lng=e.settings.defaultLng;s.distance=i;s.origin=a;e.mapping(s)}
else{e.notify(e.settings.addressErrorAlert)}})},paginationChange:function(t){this.writeDebug('paginationChange',arguments);if(this.settings.callbackPageChange){this.settings.callbackPageChange.call(this,t)};s.page=t;this.mapping(s)},getAddressByMarker:function(t){this.writeDebug('getAddressByMarker',arguments);var s='';if(e[t].address){s+=e[t].address+' '};if(e[t].address2){s+=e[t].address2+' '};if(e[t].city){s+=e[t].city+', '};if(e[t].state){s+=e[t].state+' '};if(e[t].postal){s+=e[t].postal+' '};if(e[t].country){s+=e[t].country+' '};return s},clearMarkers:function(){this.writeDebug('clearMarkers');var s=null;if(e.length<this.settings.storeLimit){s=e.length}
else{s=this.settings.storeLimit};for(var t=0;t<s;t++){u[t].setMap(null)}},directionsRequest:function(s,i,a){this.writeDebug('directionsRequest',arguments);if(this.settings.callbackDirectionsRequest){this.settings.callbackDirectionsRequest.call(this,s,i,a,e[i])};var o=this.getAddressByMarker(i);if(o){t('.'+this.settings.locationList+' ul').hide();this.clearMarkers();if(b!==null&&typeof b!=='undefined'){b.setMap(null);b=null};b=new google.maps.DirectionsRenderer();P=new google.maps.DirectionsService();b.setMap(a);b.setPanel(t('.bh-sl-directions-panel').get(0));var r={origin:s,destination:o,travelMode:google.maps.TravelMode.DRIVING};P.route(r,function(t,e){if(e===google.maps.DirectionsStatus.OK){b.setDirections(t)}});t('.'+this.settings.locationList).prepend('<div class="bh-sl-close-directions-container"><div class="'+this.settings.closeIcon+'"></div></div>')};t(n).off('click','.'+this.settings.locationList+' li .loc-directions a')},closeDirections:function(){this.writeDebug('closeDirections');if(this.settings.callbackCloseDirections){this.settings.callbackCloseDirections.call(this)};this.reset();if((l)&&(g)){if(this.countFilters()===0){this.settings.mapSettings.zoom=y}
else{this.settings.mapSettings.zoom=0};this.processForm(null)};t(n).off('click.'+o,'.'+this.settings.locationList+' .bh-sl-close-icon')},lengthUnitSwap:function(e){this.writeDebug('lengthUnitSwap',arguments);if(e.val()==='alt-distance'){t('.'+this.settings.locationList+' .loc-alt-dist').show();t('.'+this.settings.locationList+' .loc-default-dist').hide()}
else if(e.val()==='default-distance'){t('.'+this.settings.locationList+' .loc-default-dist').show();t('.'+this.settings.locationList+' .loc-alt-dist').hide()}},processForm:function(e){this.writeDebug('processForm',arguments);var n=this,i=null,f={},o=t('#'+this.settings.addressID),u=t('#'+this.settings.searchID),h=t('#'+this.settings.maxDistanceID),a='';if(typeof e!=='undefined'&&e!==null){e.preventDefault()};t('.'+n.settings.formContainer+' input, .'+n.settings.formContainer+' select').blur();if(this.settings.querystringParams===!0){if(this.getQueryString(this.settings.addressID)||this.getQueryString(this.settings.searchID)||this.getQueryString(this.settings.maxDistanceID)){r=this.getQueryString(this.settings.addressID);c=this.getQueryString(this.settings.searchID);i=this.getQueryString(this.settings.maxDistanceID);if(o.val()!==''){r=o.val()};if(u.val()!==''){c=u.val()};if(h.val()!==''){i=h.val()}}
else{r=o.val()||'';c=u.val()||'';if(this.settings.maxDistance===!0){i=h.val()||''}}}
else{r=o.val()||'';c=u.val()||'';if(this.settings.maxDistance===!0){i=h.val()||''}};if(this.settings.callbackRegion){a=this.settings.callbackRegion.call(this,r,c,i)}
else{a=t('#'+this.settings.regionID).val()};if(this.settings.callbackFormVals){this.settings.callbackFormVals.call(this,r,c,i,a)};if(typeof a!=='undefined'){f={country:a}};if(typeof this.settings.callbackGeocodeRestrictions==='function'){f=this.settings.callbackGeocodeRestrictions.call(this,r,c,i)};if(r===''&&c===''&&this.settings.autoGeocode!==!0){this._start()}
else if(r!==''){if(typeof m!=='undefined'&&typeof l!=='undefined'&&typeof g!=='undefined'&&(r===m)){s.lat=l;s.lng=g;s.origin=r;s.name=c;s.distance=i;n.mapping(s)}
else{var d=new this.googleGeocode(this);d.geocode({address:r,componentRestrictions:f,region:a},function(t){if(t!==null){l=t.latitude;g=t.longitude;s.lat=l;s.lng=g;s.origin=r;s.name=c;s.distance=i;s.geocodeResult=t.geocodeResult;n.mapping(s)}
else{n.notify(n.settings.addressErrorAlert)}})}}
else if(c!==''){if(r===''){delete s.origin};s.name=c;n.mapping(s)}
else if(this.settings.autoGeocode===!0){s.lat=l;s.lng=g;s.origin=r;s.name=c;s.distance=i;n.mapping(s)}},locationsSetup:function(t,s,i,a,n){this.writeDebug('locationsSetup',arguments);if(typeof a!=='undefined'){if(!t.distance){t.distance=this.geoCodeCalcCalcDistance(s,i,t.lat,t.lng,x.EarthRadius);if(this.settings.lengthUnit==='m'){t.altdistance=parseFloat(t.distance)*1.609344}
else if(this.settings.lengthUnit==='km'){t.altdistance=parseFloat(t.distance)/1.609344}}};if(this.settings.maxDistance===!0&&typeof n!=='undefined'&&n!==null){if(t.distance<=n){e.push(t)}
else{return}}
else if(this.settings.maxDistance===!0&&this.settings.querystringParams===!0&&typeof n!=='undefined'&&n!==null){if(t.distance<=n){e.push(t)}
else{return}}
else{e.push(t)}},sorting:function(){this.writeDebug('sorting',arguments);var e=this,n=t('#'+e.settings.mapID),i=t('#'+e.settings.sortID);if(i.length===0){return};i.on('change.'+o,function(i){i.stopPropagation();if(e.settings.pagination===!0){e.paginationChange(0)};var a,o;a=(typeof t(this).find(':selected').attr('data-method')!=='undefined')?t(this).find(':selected').attr('data-method'):'distance';o=t(this).val();e.settings.sortBy.method=a;e.settings.sortBy.prop=o;if(e.settings.callbackSorting){e.settings.callbackSorting.call(this,e.settings.sortBy)};if(n.hasClass('bh-sl-map-open')){e.mapping(s)}})},order:function(){this.writeDebug('order',arguments);var e=this,n=t('#'+e.settings.mapID),i=t('#'+e.settings.orderID);if(i.length===0){return};i.on('change.'+o,function(i){i.stopPropagation();if(e.settings.pagination===!0){e.paginationChange(0)};e.settings.sortBy.order=t(this).val();if(e.settings.callbackOrder){e.settings.callbackOrder.call(this,e.settings.order)};if(n.hasClass('bh-sl-map-open')){e.mapping(s)}})},countFilters:function(){this.writeDebug('countFilters');var e=0;if(!this.isEmptyObject(a)){for(var t in a){if(a.hasOwnProperty(t)){e+=a[t].length}}};return e},_existingCheckedFilters:function(e){this.writeDebug('_existingCheckedFilters',arguments);t('#'+this.settings.taxonomyFilters[e]+' input[type=checkbox]').each(function(){if(t(this).prop('checked')){var s=t(this).val();if(typeof s!=='undefined'&&s!==''&&a[e].indexOf(s)===-1){a[e].push(s)}}})},_existingSelectedFilters:function(e){this.writeDebug('_existingSelectedFilters',arguments);t('#'+this.settings.taxonomyFilters[e]+' select').each(function(){var s=t(this).val();if(typeof s!=='undefined'&&s!==''&&a[e].indexOf(s)===-1){a[e]=[s]}})},_existingRadioFilters:function(e){this.writeDebug('_existingRadioFilters',arguments);t('#'+this.settings.taxonomyFilters[e]+' input[type=radio]').each(function(){if(t(this).prop('checked')){var s=t(this).val();if(typeof s!=='undefined'&&s!==''&&a[e].indexOf(s)===-1){a[e]=[s]}}})},checkFilters:function(){this.writeDebug('checkFilters');for(var t in this.settings.taxonomyFilters){if(this.settings.taxonomyFilters.hasOwnProperty(t)){this._existingCheckedFilters(t);this._existingSelectedFilters(t);this._existingRadioFilters(t)}}},selectQueryStringFilters:function(e,s){this.writeDebug('selectQueryStringFilters',arguments);var i=t('#'+this.settings.taxonomyFilters[e]);if(i.find('input[type="checkbox"]').length){for(var n=0;n<s.length;n++){i.find('input:checkbox[value="'+s[n]+'"]').prop('checked',!0)}};if(i.find('select').length){i.find('option[value="'+s[0]+'"]').prop('selected',!0)};if(i.find('input[type="radio"]').length){i.find('input:radio[value="'+s[0]+'"]').prop('checked',!0)}},checkQueryStringFilters:function(){this.writeDebug('checkQueryStringFilters',arguments);for(var e in a){if(a.hasOwnProperty(e)){var t=this.getQueryString(e);if(t.indexOf(',')!==-1){t=t.split(',')};if(typeof t!=='undefined'&&t!==''&&a[e].indexOf(t)===-1){if(Array.isArray(t)){a[e]=t}
else{a[e]=[t]}};if(a[e].length){this.selectQueryStringFilters(e,a[e])}}}},getFilterKey:function(t){this.writeDebug('getFilterKey',arguments);for(var e in this.settings.taxonomyFilters){if(this.settings.taxonomyFilters.hasOwnProperty(e)){for(var s=0;s<this.settings.taxonomyFilters[e].length;s++){if(this.settings.taxonomyFilters[e]===t){return e}}}}},taxonomyFiltersInit:function(){this.writeDebug('taxonomyFiltersInit');for(var t in this.settings.taxonomyFilters){if(this.settings.taxonomyFilters.hasOwnProperty(t)){a[t]=[]}}},taxonomyFiltering:function(){this.writeDebug('taxonomyFiltering');var e=this;e.taxonomyFiltersInit();e.checkQueryStringFilters();t('.'+this.settings.taxonomyFiltersContainer).on('change.'+o,'input, select',function(i){i.stopPropagation();var o,r,n;if(e.settings.pagination===!0){e.paginationChange(0)};if(t(this).is('input[type="checkbox"]')){e.checkFilters();o=t(this).val();r=t(this).closest('.bh-sl-filters').attr('id');n=e.getFilterKey(r);if(n){if(t(this).prop('checked')){if(a[n].indexOf(o)===-1){a[n].push(o)};if(t('#'+e.settings.mapID).hasClass('bh-sl-map-open')===!0){if((l)&&(g)){e.settings.mapSettings.zoom=0;e.processForm()}
else{e.mapping(s)}}}
else{var c=a[n].indexOf(o);if(c>-1){a[n].splice(c,1);if(t('#'+e.settings.mapID).hasClass('bh-sl-map-open')===!0){if((l)&&(g)){if(e.countFilters()===0){e.settings.mapSettings.zoom=y}
else{e.settings.mapSettings.zoom=0};e.processForm()}
else{e.mapping(s)}}}}}}
else if(t(this).is('select')||t(this).is('input[type="radio"]')){e.checkFilters();o=t(this).val();r=t(this).closest('.bh-sl-filters').attr('id');n=e.getFilterKey(r);if(o){if(n){a[n]=[o];if(t('#'+e.settings.mapID).hasClass('bh-sl-map-open')===!0){if((l)&&(g)){e.settings.mapSettings.zoom=1;e.processForm()}
else{e.mapping(s)}}}}
else{if(n){a[n]=[]};e.reset();if((l)&&(g)){e.settings.mapSettings.zoom=1;e.processForm()}
else{e.mapping(s)}}}})},checkVisibleMarkers:function(e,s){this.writeDebug('checkVisibleMarkers',arguments);var i=this,a,n;t('.'+this.settings.locationList+' ul').empty();t(e).each(function(e,o){if(s.getBounds().contains(o.getPosition())){i.listSetup(o,0,0);n=D(a);t('.'+i.settings.locationList+' > ul').append(n)}});t('.'+this.settings.locationList+' ul li:even').css('background',this.settings.listColor1);t('.'+this.settings.locationList+' ul li:odd').css('background',this.settings.listColor2)},dragSearch:function(t){this.writeDebug('dragSearch',arguments);var i=t.getCenter(),n,e=this;this.settings.mapSettings.zoom=t.getZoom();l=s.lat=i.lat();g=s.lng=i.lng();var a=new this.reverseGoogleGeocode(this);n=new google.maps.LatLng(s.lat,s.lng);a.geocode({'latLng':n},function(t){if(t!==null){s.origin=r=t.address;e.mapping(s)}
else{e.notify(e.settings.addressErrorAlert)}})},emptyResult:function(){this.writeDebug('emptyResult',arguments);var e,s=t('.'+this.settings.locationList+' ul'),i=this.settings.mapSettings,a;this.map=new google.maps.Map(n.getElementById(this.settings.mapID),i);if(this.settings.callbackNoResults){this.settings.callbackNoResults.call(this,this.map,i)};s.empty();a=t('<li><div class="bh-sl-noresults-title">'+this.settings.noResultsTitle+'</div><br><div class="bh-sl-noresults-desc">'+this.settings.noResultsDesc+'</li>').hide().fadeIn();s.append(a);if((l)&&(g)){e=new google.maps.LatLng(l,g)}
else{e=new google.maps.LatLng(0,0)};this.map.setCenter(e);if(y){this.map.setZoom(y)}},originMarker:function(t,e,s){this.writeDebug('originMarker',arguments);if(this.settings.originMarker!==!0){return};var n,i='';if(typeof e!=='undefined'){if(this.settings.originMarkerImg!==null){if(this.settings.originMarkerDim===null){i=this.markerImage(this.settings.originMarkerImg)}
else{i=this.markerImage(this.settings.originMarkerImg,this.settings.originMarkerDim.width,this.settings.originMarkerDim.height)}}
else{i={url:'https://mt.googleapis.com/vt/icon/name=icons/spotlight/spotlight-waypoint-a.png'}};n=new google.maps.Marker({position:s,map:t,icon:i,draggable:!1})}},modalWindow:function(){this.writeDebug('modalWindow');if(this.settings.modal!==!0){return};var e=this;if(e.settings.callbackModalOpen){e.settings.callbackModalOpen.call(this)};t('.'+e.settings.overlay).fadeIn();t(n).on('click.'+o,'.'+e.settings.closeIcon+', .'+e.settings.overlay,function(){e.modalClose()});t(n).on('click.'+o,'.'+e.settings.modalWindow,function(t){t.stopPropagation()});t(n).on('keyup.'+o,function(t){if(t.keyCode===27){e.modalClose()}})},openNearestLocation:function(e,s,i,n){this.writeDebug('openNearestLocation',arguments);if(this.settings.openNearest!==!0||typeof e==='undefined'||(this.settings.fullMapStart===!0&&h===!0)||(this.settings.defaultLoc===!0&&h===!0)){return};var a=this;if(a.settings.callbackNearestLoc){a.settings.callbackNearestLoc.call(this,a.map,e,s,i,n)};var l=0,g=u[l];a.createInfowindow(g,'left',s,i,n);var o=t('.'+a.settings.locationList),r=t('.'+a.settings.locationList+' li[data-markerid='+l+']');t('.'+a.settings.locationList+' li').removeClass('list-focus');r.addClass('list-focus');o.animate({scrollTop:r.offset().top-o.offset().top+o.scrollTop()})},listClick:function(s,i,a,l){this.writeDebug('listClick',arguments);var r=this;t(n).on('click.'+o,'.'+r.settings.locationList+' li',function(){var o=t(this).data('markerid'),n=u[o];if(r.settings.callbackListClick){r.settings.callbackListClick.call(this,o,n,e[o],s)};s.panTo(n.getPosition());var g='left';if(r.settings.bounceMarker===!0){n.setAnimation(google.maps.Animation.BOUNCE);setTimeout(function(){n.setAnimation(null);r.createInfowindow(n,g,i,a,l)},700)}
else{r.createInfowindow(n,g,i,a,l)};if(r.settings.selectedMarkerImg!==null){r.changeSelectedMarker(n)};t('.'+r.settings.locationList+' li').removeClass('list-focus');t('.'+r.settings.locationList+' li[data-markerid='+o+']').addClass('list-focus')});t(n).on('click.'+o,'.'+r.settings.locationList+' li a',function(t){t.stopPropagation()})},resultsTotalCount:function(e){this.writeDebug('resultsTotalCount',arguments);var s=t('.bh-sl-total-results');if(typeof e==='undefined'||e<=0||s.length===0){return};s.text(e)},inlineDirections:function(e,s){this.writeDebug('inlineDirections',arguments);if(this.settings.inlineDirections!==!0||typeof s==='undefined'){return};var i=this;t(n).on('click.'+o,'.'+i.settings.locationList+' li .loc-directions a',function(a){a.preventDefault();var r=t(this).closest('li').attr('data-markerid');i.directionsRequest(s,parseInt(r),e);t(n).on('click.'+o,'.'+i.settings.locationList+' .bh-sl-close-icon',function(){i.closeDirections()})})},visibleMarkersList:function(t,e){this.writeDebug('visibleMarkersList',arguments);if(this.settings.visibleMarkersList!==!0){return};var s=this;google.maps.event.addListenerOnce(t,'idle',function(){s.checkVisibleMarkers(e,t)});google.maps.event.addListener(t,'center_changed',function(){s.checkVisibleMarkers(e,t)});google.maps.event.addListener(t,'zoom_changed',function(){s.checkVisibleMarkers(e,t)})},featuredDistanceRestriction:function(){this.writeDebug('featuredDistanceRestriction',arguments);var e=this;d=t.grep(d,function(t){if(t.hasOwnProperty('distance')){return parseFloat(t.distance)<=parseFloat(e.settings.featuredDistance)}});return d},featuredRestrictions:function(t){this.writeDebug('featuredRestrictions',arguments);if(this.settings.featuredDistance===null){return d};if(this.settings.featuredDistance!==null){d=this.featuredDistanceRestriction(t)};return d},mapping:function(t){this.writeDebug('mapping',arguments);var e=this,o,c,u,s,n,i;if(!this.isEmptyObject(t)){o=t.lat;c=t.lng;u=t.geocodeResult;s=t.origin;i=t.page};if(e.settings.pagination===!0){if(typeof i==='undefined'||m!==r){i=0}};if(typeof s==='undefined'&&this.settings.nameSearch===!0){k=e._getData()}
else{n=new google.maps.LatLng(o,c);if((typeof m!=='undefined')&&(s===m)&&(typeof C!=='undefined')){s=m;k=C}
else{k=e._getData(l,g,s,u,t)}};if(e.settings.taxonomyFilters!==null&&e.hasEmptyObjectVals(a)){e.checkFilters()};if(e.settings.dataRaw!==null){e.processData(t,n,k,i)}
else{k.done(function(s){e.processData(t,n,s,i)})}},processData:function(r,l,g,f){this.writeDebug('processData',arguments);var s=this,A=0,B,G,b,nt,S,E,N,D,M,R,j,z,P,H,x={};var O=t('#'+s.settings.lengthSwapID);if(!this.isEmptyObject(r)){B=r.lat;G=r.lng;b=r.origin;nt=r.name;S=r.distance};var X=t('#'+s.settings.mapID),tt=(s.settings.lengthUnit==='km')?s.settings.kilometersLang:s.settings.milesLang;C=k;if(typeof b!=='undefined'){m=b};if(s.settings.callbackSuccess){s.settings.callbackSuccess.call(this,r,l,g,f)};z=X.hasClass('bh-sl-map-open');if((s.settings.fullMapStart===!0&&z===!1)||(s.settings.autoGeocode===!0&&z===!1)||(s.settings.defaultLoc===!0&&z===!1)||T===!0){h=!0}
else{s.reset()};X.addClass('bh-sl-map-open');if(s.settings.dataType==='json'||s.settings.dataType==='jsonp'){for(var Z=0;A<g.length;Z++){var V=g[Z],J={};for(var U in V){if(V.hasOwnProperty(U)){J[U]=V[U]}};s.locationsSetup(J,B,G,b,S);A++}}
else if(s.settings.dataType==='kml'){t(g).find('Placemark').each(function(){var e={'name':t(this).find('name').text(),'lat':t(this).find('coordinates').text().split(',')[1],'lng':t(this).find('coordinates').text().split(',')[0],'description':t(this).find('description').text()};s.locationsSetup(e,B,G,b,S);A++})}
else{t(g).find(s.settings.xmlElement).each(function(){var e={};for(var t in this.attributes){if(this.attributes.hasOwnProperty(t)){e[this.attributes[t].name]=this.attributes[t].value}};s.locationsSetup(e,B,G,b,S);A++})};if(s.settings.nameSearch===!0){if(typeof c!=='undefined'){a[s.settings.nameAttribute]=[c]}};if(s.settings.taxonomyFilters!==null||s.settings.nameSearch===!0){for(var w in a){if(a.hasOwnProperty(w)&&a[w].length>0){for(var F=0;F<a[w].length;F++){if(!x[w]){x[w]=[]};if(w===s.settings.nameAttribute){x[w][F]='(?:^|\\s)'+a[w][F].replace(/([.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,'')}
else{x[w][F]='(?=.*'+a[w][F].replace(/([.*+?^=!:${}()|\[\]\/\\]|&\s+)/g,'')+'(?!\\s))'}}}};if(!s.isEmptyObject(x)){e=t.grep(e,function(t){return s.filterData(t,x)})}};if(s.settings.sortBy!==null&&typeof s.settings.sortBy==='object'){s.sortCustom(e)}
else{if(typeof b!=='undefined'){s.sortNumerically(e)};if(s.isEmptyObject(x)){if(s.settings.maxDistance===!0&&S){if(typeof e[0]==='undefined'||e[0].distance>S){s.notify(s.settings.distanceErrorAlert+S+' '+tt)}}
else{if(typeof e[0]!=='undefined'){if(s.settings.distanceAlert!==-1&&e[0].distance>s.settings.distanceAlert){s.notify(s.settings.distanceErrorAlert+s.settings.distanceAlert+' '+tt);j=!0}}
else{throw new Error('No locations found. Please check the dataLocation setting and path.')}}};if(typeof e[0]!=='undefined'){H=e[0]}};if(s.settings.featuredLocations===!0){d=t.grep(e,function(t){if(t.hasOwnProperty('featured')){return t.featured==='true'}});d=s.featuredRestrictions(r);I=t.grep(e,function(t){if(t.hasOwnProperty('featured')){return t.featured!=='true'}});e=[];e=d.concat(I)};if(s.settings.slideMap===!0){p.show()};if(s.settings.pagination===!0){s.paginationSetup(f)};if(s.settings.altDistanceNoResult===!0&&H.distance>s.settings.distanceAlert){s.emptyResult();return};if(s.isEmptyObject(e)||e[0].result==='none'){s.emptyResult();return};s.modalWindow();if(s.settings.storeLimit===-1||e.length<s.settings.storeLimit||(this.settings.fullMapStart===!0&&h===!0&&(!isNaN(this.settings.fullMapStartListLimit)||this.settings.fullMapStartListLimit>26||this.settings.fullMapStartListLimit===-1))){L=e.length}
else{L=s.settings.storeLimit};if(s.settings.pagination===!0){M=s.settings.locationsPerPage;D=f*s.settings.locationsPerPage;if((D+M)>e.length){M=s.settings.locationsPerPage-((D+M)-e.length)};e=e.slice(D,D+M);L=e.length}
else{M=L;D=0};s.resultsTotalCount(e.length);if((s.settings.fullMapStart===!0&&h===!0&&s.settings.querystringParams!==!0)||(s.settings.mapSettings.zoom===0)||(typeof b==='undefined')||(j===!0)){R=s.settings.mapSettings;N=new google.maps.LatLngBounds()}
else if(s.settings.pagination===!0){var it=new google.maps.LatLng(e[0].lat,e[0].lng);if(f===0){s.settings.mapSettings.center=l;R=s.settings.mapSettings}
else{s.settings.mapSettings.center=it;R=s.settings.mapSettings}}
else{s.settings.mapSettings.center=l;R=s.settings.mapSettings};s.map=new google.maps.Map(n.getElementById(s.settings.mapID),R);google.maps.event.addDomListener(i,'resize',function(){var t=s.map.getCenter();google.maps.event.trigger(s.map,'resize');s.map.setCenter(t)});if(s.settings.dragSearch===!0){s.map.addListener('dragend',function(){s.dragSearch(s.map)})};p.data(s.settings.mapID.replace('#',''),s.map);if(s.settings.callbackMapSet){s.settings.callbackMapSet.call(this,s.map,l,y,R)};if(typeof InfoBubble!=='undefined'&&s.settings.infoBubble!==null){var W=s.settings.infoBubble;W.map=s.map;P=new InfoBubble(W)}
else{P=new google.maps.InfoWindow()};s.originMarker(s.map,b,l);t(n).on('click.'+o,'.bh-sl-pagination li',function(e){e.preventDefault();s.paginationChange(t(this).attr('data-page'))});s.inlineDirections(s.map,b);for(var v=0;v<=M-1;v++){var q='';if(f>0){q=String.fromCharCode('A'.charCodeAt(0)+(D+v))}
else{q=String.fromCharCode('A'.charCodeAt(0)+v)};var K=new google.maps.LatLng(e[v].lat,e[v].lng);E=s.createMarker(K,e[v].name,e[v].address,q,s.map,e[v].category);E.set('id',v);u[v]=E;if((s.settings.fullMapStart===!0&&h===!0&&s.settings.querystringParams!==!0)||(s.settings.mapSettings.zoom===0)||(typeof b==='undefined')||(j===!0)){N.extend(K)};s.createInfowindow(E,null,P,D,f)};if((s.settings.fullMapStart===!0&&h===!0&&s.settings.querystringParams!==!0)||(s.settings.mapSettings.zoom===0)||(typeof b==='undefined')||(j===!0)){if(!N.isEmpty()){s.map.setOptions({maxZoom:18});s.map.fitBounds(N)}};var st=t('.'+s.settings.locationList+' ul');st.empty();if(h&&s.settings.fullMapStartListLimit!==!1&&!isNaN(s.settings.fullMapStartListLimit)&&s.settings.fullMapStartListLimit!==-1){for(var Q=0;Q<s.settings.fullMapStartListLimit;Q++){var et=u[Q];s.listSetup(et,D,f)}}
else{t(u).each(function(t){var e=u[t];s.listSetup(e,D,f)})};if(O.length){s.lengthUnitSwap(O);O.on('change.'+o,function(t){t.stopPropagation();s.lengthUnitSwap(O)})};s.openNearestLocation(H,P,D,f);if(typeof MarkerClusterer!=='undefined'&&s.settings.markerCluster!==null){var at=new MarkerClusterer(s.map,u,s.settings.markerCluster)};s.listClick(s.map,P,D,f);t('.'+s.settings.locationList+' ul > li:even').css('background',s.settings.listColor1);t('.'+s.settings.locationList+' ul > li:odd').css('background',s.settings.listColor2);s.visibleMarkersList(s.map,u);if(s.settings.modal===!0&&s.settings.callbackModalReady){s.settings.callbackModalReady.call(this,r)};if(s.settings.callbackFilters){s.settings.callbackFilters.call(this,a,r)}},writeDebug:function(){if(i.console&&this.settings.debug){if(Function.prototype.bind){this.writeDebug=Function.prototype.bind.call(console.log,console,'StoreLocator :')}
else{this.writeDebug=function(){arguments[0]='StoreLocator : '+arguments[0];Function.prototype.apply.call(console.log,console,arguments)}};this.writeDebug.apply(this,arguments)}}});t.fn[o]=function(e){var i=arguments;if(e===f||typeof e==='object'){return this.each(function(){if(!t.data(this,'plugin_'+o)){t.data(this,'plugin_'+o,new F(this,e))}})}
else if(typeof e==='string'&&e[0]!=='_'&&e!=='init'){var s;this.each(function(){var n=t.data(this,'plugin_'+o);if(n instanceof F&&typeof n[e]==='function'){s=n[e].apply(n,Array.prototype.slice.call(i,1))};if(e==='destroy'){t.data(this,'plugin_'+o,null)}});return s!==f?s:this}}})(jQuery,window,document);
/* Source and licensing information for the above line(s) can be found at http://www.snorkellifts.com/themes/sglobal/js/jquery.storelocator.js. */